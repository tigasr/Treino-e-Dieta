import React, { useState } from 'react';
import { Calendar, CheckCircle, Circle, Play, X } from 'lucide-react';

export default function HipertrofiaApp() {
  const [activeTab, setActiveTab] = useState('treino');
  const [completedWorkouts, setCompletedWorkouts] = useState({});
  const [selectedExercise, setSelectedExercise] = useState(null);
  const [currentWeek, setCurrentWeek] = useState(1);

  const workouts = [
    {
      day: 'Segunda',
      icon: 'üí™',
      title: 'Peito + Tr√≠ceps',
      exercises: [
        { name: 'Supino reto', sets: '4x8-10', video: 'rT7DgCr-3pg' },
        { name: 'Supino inclinado halteres', sets: '4x10', video: '8iPEnn-ltC8' },
        { name: 'Crossover', sets: '3x12', video: 'taI4XduLpTk' },
        { name: 'Peck deck', sets: '3x12', video: 'Z6UT7temN1A' },
        { name: 'Tr√≠ceps testa', sets: '3x10', video: 'd_KZxkY_0cM' },
        { name: 'Tr√≠ceps corda', sets: '3x12-15', video: '2-LAMcpz0DU' }
      ]
    },
    {
      day: 'Ter√ßa',
      icon: 'ü¶æ',
      title: 'Costas + B√≠ceps',
      exercises: [
        { name: 'Barra fixa', sets: '4x falha', video: 'eGo4IYlbE5g' },
        { name: 'Remada curvada', sets: '4x8-10', video: 'kBWAon7ItDw' },
        { name: 'Pulldown', sets: '3x12', video: 'CAwf7n6Luuc' },
        { name: 'Remada baixa', sets: '3x12', video: 'UCXxvVItLoM' },
        { name: 'Rosca direta', sets: '3x10', video: 'ykJmrZ5v0Oo' },
        { name: 'Rosca martelo', sets: '3x12', video: 'zC3nLlEvim4' }
      ]
    },
    {
      day: 'Quarta',
      icon: 'ü¶µ',
      title: 'Pernas',
      exercises: [
        { name: 'Agachamento livre', sets: '4x8', video: 'ultWZbUMPL8' },
        { name: 'Leg press', sets: '4x12', video: 'IZxyjW7MPJQ' },
        { name: 'Mesa flexora', sets: '3x12', video: '1Tq3QdYUuHs' },
        { name: 'Cadeira extensora', sets: '3x12', video: 'YyvSfVjQeL0' },
        { name: 'Panturrilha sentado', sets: '4x15', video: 'JbyjNymZP4Y' }
      ]
    },
    {
      day: 'Quinta',
      icon: 'üèãÔ∏è',
      title: 'Ombros + Core',
      exercises: [
        { name: 'Desenvolvimento halter', sets: '4x8-10', video: 'qEwKCRXJCog' },
        { name: 'Eleva√ß√£o lateral', sets: '4x12', video: '3VcKaXpzqRo' },
        { name: 'Eleva√ß√£o lateral inclinada', sets: '3x12', video: 'qVsk4RyG2ss' },
        { name: 'Crucifixo inverso', sets: '3x15', video: 'EA7u4Q_8jQ0' },
        { name: 'Abdominal m√°quina', sets: '3x15', video: 'WqOUKgLyihv' },
        { name: 'Prancha', sets: '3x60s', video: 'ASdvN_XEl_c' }
      ]
    },
    {
      day: 'Sexta',
      icon: 'üçë',
      title: 'Posterior + Gl√∫teo',
      exercises: [
        { name: 'Terra romeno - 4x12-15', video: 'SHsUIZiNdeY' },
        { name: 'Cadeira flexora - 4x12-15',, video: 'xDmFkJxPzeM' },
        { name: 'Cadeira abdutora - 4x12-15', video: 'D7KaRcUTQeE' },
        { name: 'Cadeira Adutora', sets: '4x12-15', video: 'YA-h3n9L4YU' },
        { name: 'Panturrilha em p√©', sets: '4x15', video: 'gwLzBJYoNJI' }
      ]
    }
  ];

  const toggleWorkout = (week, day) => {
    const key = `${week}-${day}`;
    setCompletedWorkouts(prev => ({
      ...prev,
      [key]: !prev[key]
    }));
  };

  const getCompletedCount = () => {
    return Object.values(completedWorkouts).filter(v => v).length;
  };

  const getWeekProgress = (week) => {
    let completed = 0;
    workouts.forEach(w => {
      if (completedWorkouts[`${week}-${w.day}`]) completed++;
    });
    return Math.round((completed / 5) * 100);
  };

  return (
    <div className="min-h-screen bg-gradient-to-br from-purple-600 via-purple-700 to-pink-600 p-4">
      <div className="max-w-6xl mx-auto">
        <div className="text-center text-white mb-8">
          <h1 className="text-4xl md:text-5xl font-bold mb-4 drop-shadow-lg">
            üí™ PLANO DE HIPERTROFIA - TIAGO
          </h1>
          <div className="flex flex-wrap justify-center gap-4 mt-6">
            <div className="bg-white/20 backdrop-blur-lg px-6 py-3 rounded-2xl border-2 border-white/30">
              <span className="text-2xl mr-2">‚öñÔ∏è</span>
              <strong>Peso:</strong> 57kg
            </div>
            <div className="bg-white/20 backdrop-blur-lg px-6 py-3 rounded-2xl border-2 border-white/30">
              <span className="text-2xl mr-2">üìè</span>
              <strong>Altura:</strong> 1,73m
            </div>
            <div className="bg-white/20 backdrop-blur-lg px-6 py-3 rounded-2xl border-2 border-white/30">
              <span className="text-2xl mr-2">üéØ</span>
              <strong>Objetivo:</strong> Hipertrofia
            </div>
          </div>
          
          <div className="mt-6 bg-white/20 backdrop-blur-lg p-6 rounded-2xl border-2 border-white/30 inline-block">
            <div className="flex items-center gap-6 flex-wrap justify-center">
              <div className="text-center">
                <div className="text-3xl font-bold">{getCompletedCount()}</div>
                <div className="text-sm opacity-90">Treinos feitos</div>
              </div>
              <div className="text-center">
                <div className="text-3xl font-bold">{currentWeek}</div>
                <div className="text-sm opacity-90">Semana atual</div>
              </div>
              <div className="text-center">
                <div className="text-3xl font-bold">{getWeekProgress(currentWeek)}%</div>
                <div className="text-sm opacity-90">Progresso</div>
              </div>
            </div>
          </div>
        </div>

        <div className="flex justify-center gap-4 mb-8 flex-wrap">
          <button
            onClick={() => setActiveTab('treino')}
            className={`px-8 py-4 rounded-full font-bold text-lg transition-all shadow-lg ${
              activeTab === 'treino'
                ? 'bg-gradient-to-r from-pink-500 to-red-500 text-white scale-105'
                : 'bg-white/90 text-purple-700 hover:scale-105'
            }`}
          >
            üèãÔ∏è Treino
          </button>
          <button
            onClick={() => setActiveTab('calendario')}
            className={`px-8 py-4 rounded-full font-bold text-lg transition-all shadow-lg ${
              activeTab === 'calendario'
                ? 'bg-gradient-to-r from-pink-500 to-red-500 text-white scale-105'
                : 'bg-white/90 text-purple-700 hover:scale-105'
            }`}
          >
            üìÖ Calend√°rio
          </button>
          <button
            onClick={() => setActiveTab('dieta')}
            className={`px-8 py-4 rounded-full font-bold text-lg transition-all shadow-lg ${
              activeTab === 'dieta'
                ? 'bg-gradient-to-r from-pink-500 to-red-500 text-white scale-105'
                : 'bg-white/90 text-purple-700 hover:scale-105'
            }`}
          >
            üçΩÔ∏è Dieta
          </button>
        </div>

        {activeTab === 'treino' && (
          <div className="space-y-6">
            {workouts.map((workout, idx) => (
              <div key={idx} className="bg-white rounded-3xl p-6 shadow-2xl">
                <div className="flex items-center gap-4 mb-6 pb-4 border-b-4 border-purple-600">
                  <div className="text-5xl">{workout.icon}</div>
                  <div className="flex-1">
                    <h2 className="text-2xl font-bold text-purple-600">
                      {workout.day.toUpperCase()} - {workout.title}
                    </h2>
                  </div>
                  <button
                    onClick={() => toggleWorkout(currentWeek, workout.day)}
                    className={`p-3 rounded-full transition-all ${
                      completedWorkouts[`${currentWeek}-${workout.day}`]
                        ? 'bg-green-500 text-white'
                        : 'bg-gray-200 text-gray-400 hover:bg-gray-300'
                    }`}
                  >
                    {completedWorkouts[`${currentWeek}-${workout.day}`] ? (
                      <CheckCircle size={28} />
                    ) : (
                      <Circle size={28} />
                    )}
                  </button>
                </div>
                <div className="space-y-3">
                  {workout.exercises.map((exercise, exIdx) => (
                    <div
                      key={exIdx}
                      onClick={() => setSelectedExercise(exercise)}
                      className="flex items-center p-4 bg-gradient-to-r from-gray-50 to-white rounded-xl hover:from-gray-100 hover:to-gray-50 transition-all cursor-pointer group"
                    >
                      <div className="bg-purple-600 text-white w-8 h-8 rounded-full flex items-center justify-center font-bold mr-4 flex-shrink-0">
                        {exIdx + 1}
                      </div>
                      <div className="flex-1 font-medium text-gray-700 group-hover:text-purple-600 transition-colors">
                        {exercise.name}
                      </div>
                      <div className="bg-pink-500 text-white px-4 py-2 rounded-full font-bold text-sm mr-3 flex-shrink-0">
                        {exercise.sets}
                      </div>
                      <Play className="text-purple-600 group-hover:text-pink-500 transition-colors flex-shrink-0" size={20} />
                    </div>
                  ))}
                </div>
              </div>
            ))}
          </div>
        )}

        {activeTab === 'calendario' && (
          <div className="space-y-6">
            <div className="bg-white rounded-3xl p-6 shadow-2xl">
              <div className="flex flex-col md:flex-row items-center justify-between mb-6 gap-4">
                <h2 className="text-2xl font-bold text-purple-600 flex items-center gap-3">
                  <Calendar size={32} />
                  Calend√°rio - 12 Semanas
                </h2>
                <div className="flex gap-2">
                  <button
                    onClick={() => setCurrentWeek(Math.max(1, currentWeek - 1))}
                    disabled={currentWeek === 1}
                    className="px-4 py-2 bg-purple-600 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-purple-700 transition-colors"
                  >
                    ‚Üê Anterior
                  </button>
                  <button
                    onClick={() => setCurrentWeek(Math.min(12, currentWeek + 1))}
                    disabled={currentWeek === 12}
                    className="px-4 py-2 bg-purple-600 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-purple-700 transition-colors"
                  >
                    Pr√≥xima ‚Üí
                  </button>
                </div>
              </div>

              <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                {[...Array(12)].map((_, weekNum) => {
                  const week = weekNum + 1;
                  const progress = getWeekProgress(week);
                  const isDeload = week === 12;
                  
                  return (
                    <div
                      key={week}
                      onClick={() => setCurrentWeek(week)}
                      className={`p-5 rounded-2xl cursor-pointer transition-all ${
                        currentWeek === week
                          ? 'bg-gradient-to-br from-purple-600 to-pink-600 text-white scale-105 shadow-2xl'
                          : 'bg-gray-100 hover:bg-gray-200'
                      }`}
                    >
                      <div className="flex items-center justify-between mb-3">
                        <h3 className="font-bold text-lg">
                          Semana {week}
                          {isDeload && ' üéØ'}
                        </h3>
                        <span className="text-2xl font-bold">{progress}%</span>
                      </div>
                      {isDeload && (
                        <div className={`text-sm mb-3 ${currentWeek === week ? 'text-white' : 'text-orange-600'} font-semibold`}>
                          ‚ö° DELOAD WEEK
                        </div>
                      )}
                      <div className="w-full bg-white/30 rounded-full h-2 mb-3">
                        <div
                          className={`h-2 rounded-full transition-all ${
                            currentWeek === week ? 'bg-white' : 'bg-purple-600'
                          }`}
                          style={{ width: `${progress}%` }}
                        />
                      </div>
                      <div className="grid grid-cols-5 gap-1">
                        {workouts.map((w, idx) => (
                          <div
                            key={idx}
                            className={`text-center p-2 rounded text-xs ${
                              completedWorkouts[`${week}-${w.day}`]
                                ? currentWeek === week
                                  ? 'bg-white/30'
                                  : 'bg-green-500 text-white'
                                : currentWeek === week
                                ? 'bg-white/10'
                                : 'bg-white'
                            }`}
                          >
                            {completedWorkouts[`${week}-${w.day}`] ? '‚úì' : w.icon}
                          </div>
                        ))}
                      </div>
                    </div>
                  );
                })}
              </div>
            </div>

            <div className="bg-white rounded-3xl p-6 shadow-2xl">
              <h3 className="text-2xl font-bold text-purple-600 mb-6">
                üìã Semana {currentWeek} - Treinos
              </h3>
              <div className="space-y-3">
                {workouts.map((workout, idx) => (
                  <div
                    key={idx}
                    onClick={() => toggleWorkout(currentWeek, workout.day)}
                    className={`flex items-center justify-between p-4 rounded-xl cursor-pointer transition-all ${
                      completedWorkouts[`${currentWeek}-${workout.day}`]
                        ? 'bg-green-100 border-2 border-green-500'
                        : 'bg-gray-50 hover:bg-gray-100 border-2 border-transparent'
                    }`}
                  >
                    <div className="flex items-center gap-4">
                      <span className="text-3xl">{workout.icon}</span>
                      <div>
                        <div className="font-bold text-lg">{workout.day}</div>
                        <div className="text-sm text-gray-600">{workout.title}</div>
                      </div>
                    </div>
                    {completedWorkouts[`${currentWeek}-${workout.day}`] ? (
                      <CheckCircle className="text-green-500" size={32} />
                    ) : (
                      <Circle className="text-gray-400" size={32} />
                    )}
                  </div>
                ))}
              </div>
            </div>
          </div>
        )}

        {activeTab === 'dieta' && (
          <div className="bg-white rounded-3xl p-8 shadow-2xl">
            <h2 className="text-3xl font-bold text-center text-purple-600 mb-8">
              üçΩÔ∏è DIETA PARA HIPERTROFIA
            </h2>

            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
              <div className="bg-gradient-to-br from-purple-600 to-purple-800 text-white p-6 rounded-2xl text-center shadow-lg">
                <div className="text-4xl mb-3">üî•</div>
                <div className="text-3xl font-bold mb-2">2.400-2.500</div>
                <div className="text-lg opacity-90">Calorias/dia</div>
              </div>
              <div className="bg-gradient-to-br from-pink-600 to-pink-800 text-white p-6 rounded-2xl text-center shadow-lg">
                <div className="text-4xl mb-3">ü•©</div>
                <div className="text-3xl font-bold mb-2">~115g</div>
                <div className="text-lg opacity-90">Prote√≠nas</div>
              </div>
              <div className="bg-gradient-to-br from-purple-600 to-pink-600 text-white p-6 rounded-2xl text-center shadow-lg">
                <div className="text-4xl mb-3">üçö</div>
                <div className="text-3xl font-bold mb-2">260-285g</div>
                <div className="text-lg opacity-90">Carboidratos</div>
              </div>
              <div className="bg-gradient-to-br from-pink-500 to-red-500 text-white p-6 rounded-2xl text-center shadow-lg">
                <div className="text-4xl mb-3">ü•ë</div>
                <div className="text-3xl font-bold mb-2">55-60g</div>
                <div className="text-lg opacity-90">Gorduras</div>
              </div>
            </div>

            <div className="space-y-4">
              {[
                { icon: '‚ö°', title: 'Pr√©-treino', food: 'Banana + p√£o integral ou aveia + pasta de amendoim/mel' },
                { icon: 'üåÖ', title: 'P√≥s-treino / Caf√© da manh√£', food: 'Ovos + p√£o/tapioca + fruta + leite ou iogurte' },
                { icon: 'üç±', title: 'Almo√ßo', food: 'Prote√≠na animal + arroz/massa + feij√£o + legumes + azeite' },
                { icon: 'ü•§', title: 'Lanche da tarde', food: 'Iogurte + aveia/granola + fruta + castanhas' },
                { icon: 'üåô', title: 'Jantar', food: 'Prote√≠na + carbo + legumes' },
                { icon: 'üåú', title: 'Ceia (opcional)', food: 'Leite, iogurte ou ovo' }
              ].map((meal, idx) => (
                <div key={idx} className="bg-gray-50 p-5 rounded-2xl border-l-4 border-purple-600">
                  <div className="flex items-center gap-3 mb-2">
                    <span className="text-3xl">{meal.icon}</span>
                    <h3 className="text-xl font-bold text-purple-600">{meal.title}</h3>
                  </div>
                  <p className="text-gray-700 ml-12">{meal.food}</p>
                </div>
              ))}
            </div>

            <div className="bg-gradient-to-r from-pink-500 to-red-500 text-white p-6 rounded-2xl mt-8">
              <h3 className="text-2xl font-bold mb-4 flex items-center gap-2">
                <span>üíä</span> Suplementa√ß√£o Opcional
              </h3>
              <div className="space-y-3">
                <div className="flex items-center gap-3 text-lg">
                  <span>üíä</span> Creatina 5g/dia
                </div>
                <div className="flex items-center gap-3 text-lg">
                  <span>üíä</span> Whey apenas se faltar prote√≠na
                </div>
                <div className="flex items-center gap-3 text-lg">
                  <span>üíä</span> Cafe√≠na opcional
                </div>
              </div>
            </div>
          </div>
        )}

        <div className="text-center text-white mt-8 p-6 bg-white/10 backdrop-blur-lg rounded-2xl">
          <h3 className="text-xl font-bold mb-2">üìä Periodiza√ß√£o Recomendada</h3>
          <p className="text-lg">12 semanas com deload na semana 12</p>
          <p className="mt-4 opacity-80">‚ú® Bons treinos e boa alimenta√ß√£o! ‚ú®</p>
        </div>
      </div>

      {selectedExercise && (
        <div
          className="fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50"
          onClick={() => setSelectedExercise(null)}
        >
          <div
            className="bg-white rounded-3xl p-6 max-w-4xl w-full max-h-[90vh] overflow-y-auto"
            onClick={(e) => e.stopPropagation()}
          >
            <div className="flex items-center justify-between mb-4">
              <h3 className="text-2xl font-bold text-purple-600">
                {selectedExercise.name}
              </h3>
              <button
                onClick={() => setSelectedExercise(null)}
                className="p-2 hover:bg-gray-100 rounded-full transition-colors"
              >
                <X size={28} />
              </button>
            </div>
            <div className="bg-pink-500 text-white px-4 py-2 rounded-full font-bold inline-block mb-4">
              {selectedExercise.sets}
            </div>
            <div className="aspect-video bg-gray-900 rounded-2xl overflow-hidden">
              <iframe
                width="100%"
                height="100%"
                src={`https://www.youtube.com/embed/${selectedExercise.video}`}
                title={selectedExercise.name}
                frameBorder="0"
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                allowFullScreen
                className="w-full h-full"
              />
            </div>
            <div className="mt-4 p-4 bg-purple-50 rounded-xl">
              <p className="text-gray-700">
                <strong>üí° Dica:</strong> Assista ao v√≠deo com aten√ß√£o para executar o exerc√≠cio com a t√©cnica correta e evitar les√µes!
              </p>
            </div>
          </div>
        </div>
      )}
    </div>
  );
}
